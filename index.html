<!DOCTYPE html>
<html>
<head>
<script src="jspsych/dist/jspsych.js"></script>
<link href="jspsych/dist/jspsych.css" rel="stylesheet" type="text/css" />
<style>
body {
text-align: center;
padding-top: 50px;
}
video {
width: 1000px;
margin-bottom: 20px;
}
</style>
</head>
<body>
<video id="myVideo" src="Animation Video.mp4" controls playsinline></video>
<audio id="myAudio" controls></audio>

<br />
<button id="playButton">Play Video + Audio from CSV</button>

<script>
document.getElementById("playButton").addEventListener("click", async function () {
const audio = document.getElementById("myAudio");
const video = document.getElementById("myVideo");

try {
const response = await fetch("audio_files.csv");
if (!response.ok) throw new Error("CSV file not found");

const text = await response.text();
const lines = text.trim().split("\n");

if (lines.length < 2) throw new Error("No audio files listed");

const audioFile = lines[1].trim();

console.log("Loading audio:", audioFile);
audio.src = audioFile;

audio.load();

await Promise.all([audio.play(), video.play()]);
} catch (error) {
console.error("Error playing media:", error);
alert("Failed to load or play media. Check console for details.");
}
});
</script>
</body>
</html>
